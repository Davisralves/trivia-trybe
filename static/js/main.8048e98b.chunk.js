(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/7FbY.f7d7b7e7.gif"},33:function(e,t,a){e.exports=a(50)},38:function(e,t,a){},43:function(e,t,a){},46:function(e,t){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),s=a.n(c),o=(a(38),a(10)),i=a(16),u=a(3),l=a(4),p=a(6),m=a(5),d=a(7),b=a(1),h=(a(43),a(2)),f=a.n(h),y=a(19),g=a(11),v=a(20),O=a.n(v),j=a(22),E=a(21),k=a.n(E),C=function(){var e,t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return"https://opentdb.com/api_token.php?command=request",a.next=3,f.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 3:return e=a.sent,a.next=6,f.a.awrap(e.json());case 6:return t=a.sent,localStorage.setItem("token",t.token),a.abrupt("return",t.token);case 9:case"end":return a.stop()}}))},w=function(e){var t,a,n=arguments;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=n.length>1&&void 0!==n[1]?n[1]:"https://opentdb.com/api.php?amount=5&token=",r.next=3,f.a.awrap(fetch("".concat(t).concat(e)));case 3:return a=r.sent,r.abrupt("return",a.json());case 5:case"end":return r.stop()}}))},S=function(e,t){var a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.awrap(w(e,t));case 2:if(a=n.sent,0!==a.response_code){n.next=6;break}return n.abrupt("return",{tokenIsValid:!0,questionObject:a});case 6:return n.abrupt("return",{tokenIsValid:!1});case 7:case"end":return n.stop()}}))},T=function(e){var t,a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t=localStorage.getItem("token"))){n.next=11;break}return n.next=4,f.a.awrap(S(t,e));case 4:if((a=n.sent).tokenIsValid){n.next=10;break}return n.next=8,f.a.awrap(C());case 8:t=n.sent,S(t);case 10:return n.abrupt("return",a.questionObject);case 11:case"end":return n.stop()}}))},x=function(e){var t={player:e},a=JSON.stringify(t);localStorage.setItem("state",a)},R=function(){return JSON.parse(localStorage.getItem("ranks"))},N=function(e){return k()(e).toString()};function q(e){return k()(e).toString()}var A=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.text,a=e.dataTestid,n=e.id,c=e.disabled,s=e.onClick;return r.a.createElement("button",{type:"button",className:"buttons-login","data-testid":a,id:n,disabled:c,onClick:s},t)}}]),t}(n.Component);A.defaultProps={onClick:"",disabled:!1};var I=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={player:{name:"",email:""}},a.handleChange=a.handleChange.bind(Object(g.a)(a)),a.handleClick=a.handleClick.bind(Object(g.a)(a)),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(y.a)({},a,n))}},{key:"handleClick",value:function(e){var t,a,n,r;return f.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=this.state.email,a=this.props,n=a.dispatchSetValue,r=a.history,n(this.state),c.next=5,f.a.awrap(C());case 5:q(t),r.push(e);case 7:case"end":return c.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.email;return r.a.createElement("section",{className:"App"},r.a.createElement("section",{className:"input-login"},r.a.createElement("img",{src:O.a,className:"App-logo",alt:"logo"}),r.a.createElement("label",{htmlFor:"name-input",className:"name-input"},r.a.createElement("input",{type:"text","data-testid":"input-player-name",name:"name",placeholder:"Nome",className:"inputs",id:"name-input",value:a,onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"email-input",className:"name-input"},r.a.createElement("input",{type:"email",className:"inputs","data-testid":"input-gravatar-email",name:"email",id:"email-input",placeholder:"Email",value:n,onChange:this.handleChange})),r.a.createElement(A,{disabled:!n||!a,dataTestid:"btn-play",id:"button-form",onClick:function(){return e.handleClick("/game")},text:"Jogar",className:"gameNext"}),r.a.createElement(i.b,{to:"/settings"},r.a.createElement(A,{dataTestid:"btn-settings",id:"button-config",text:"Configurar"}))))}}]),t}(n.Component),_=Object(o.b)(null,(function(e){return{dispatchSetValue:function(t){e({type:"SET_FEEDBACK",payload:t})}}}))(I),F=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App paper container-lg"},r.a.createElement("h1",{"data-testid":"settings-title"},"Configura\xe7\xf5es"))}}]),t}(n.Component),D=a(13),J=a(12),B=(a(48),function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.player,a=e.email,n=e.score,c=e.statePlayer;return x(c),r.a.createElement("header",{className:"header-questions"},r.a.createElement("div",null,r.a.createElement("img",{src:O.a,className:"logo-header",alt:"logo"})),r.a.createElement("div",{className:"gravatal-img"},r.a.createElement("img",{"data-testid":"header-profile-picture",src:"https://www.gravatar.com/avatar/".concat(N(a)),alt:"player"}),r.a.createElement("p",{"data-testid":"header-player-name"},t),r.a.createElement("p",{"data-testid":"header-score"},n)))}}]),t}(n.Component)),P=Object(o.b)((function(e){return{player:e.userReducer.player.name,email:e.userReducer.player.gravatarEmail,score:e.userReducer.player.score,statePlayer:e.userReducer.player}}))(B),V=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={counter:30,pause:e.pauseTimer},a.subtractTimer=a.subtractTimer.bind(Object(g.a)(a)),a.resetTimerFunc=a.resetTimerFunc.bind(Object(g.a)(a)),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:1e3,setInterval(this.subtractTimer,1e3);case 2:case"end":return e.stop()}}),null,this)}},{key:"resetTimerFunc",value:function(){var e=this.props,t=e.resetTimer,a=e.pauseTimer;t&&this.setState({counter:30,pause:a})}},{key:"subtractTimer",value:function(){var e=this.props.pauseTimer;this.setState((function(t){var a=t.counter,n=t.pause;return n?{counter:a,pause:n}:a>0?{counter:a-1,pause:e}:{counter:0}}))}},{key:"calculateDificult",value:function(e){switch(e){case"hard":return 3;case"medium":return 2;case"easy":default:return 1}}},{key:"points",value:function(e,t){return 10+e*this.calculateDificult(t)}},{key:"render",value:function(){var e=this.props,t=e.difficulty,a=e.correctClick,n=e.setCorrectClick,c=e.dispatchCount,s=e.resetTimer,o=e.player,i=this.state.counter;if(a){var u=this.points(i,t);o.score+=u,o.assertions+=1,x(o),c({player:o}),n(!1)}return s&&this.resetTimerFunc(),r.a.createElement("h3",null,"Tempo:"," ",i)}}]),t}(n.Component),M=Object(o.b)((function(e){return{player:e.userReducer.player}}),(function(e){return{dispatchCount:function(t){e({type:"SET_SCORE",payload:t})}}}))(V),L=[{category:"question-category",type:"",difficulty:"",question:"question-text",correct_answer:"",sortedAnswers:["answer1","answer2"]}];function U(){var e=Object(n.useState)(L),t=Object(J.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(0),o=Object(J.a)(s,2),i=o[0],u=o[1],l=Object(n.useState)(!1),p=Object(J.a)(l,2),m=p[0],d=p[1],h=Object(n.useState)(!1),y=Object(J.a)(h,2),g=y[0],v=y[1],O=Object(n.useState)(),E=Object(J.a)(O,2),k=E[0],C=E[1],w=Object(n.useState)(!1),S=Object(J.a)(w,2),x=S[0],R=S[1],N=Object(n.useState)(!1),q=Object(J.a)(N,2),A=q[0],I=q[1],_=Object(n.useState)(!1),F=Object(J.a)(_,2),B=F[0],V=F[1],U=Object(b.f)(),W=function(){clearTimeout(k);var e=setTimeout((function(){return d(!0)}),3e4);C(e)},K=function(e){var t=e.correct_answer,a=e.incorrect_answers;return[t].concat(Object(j.a)(a)).sort((function(){return Math.random()-.5}))},G=function(e){return e.map((function(e){return Object(D.a)({},e,{sortedAnswers:K(e)})}))},H=function(e){return decodeURI(e).replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/&eacute/g,"\xe9")},Y=function(e,t,a){return r.a.createElement("button",{type:"button",className:e,key:a,disabled:m,onClick:function(){return function(e){d(!0),I(!0),"correct"===e&&v(!0)}(e)}},H(t))},$=function(){i<4&&(u(i+1),d(!1)),R(!0),W(),I(!1)};Object(n.useEffect)((function(){!function(){var e,t;f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return V(!0),a.next=3,f.a.awrap(T());case 3:e=a.sent,t=e.results,c(G(t)),V(!1),W();case 8:case"end":return a.stop()}}))}()}),[]),Object(n.useEffect)((function(){return R(!1)}),[x]);var z=a[i],Q=z.category,X=z.question,Z=z.correct_answer,ee=z.sortedAnswers,te=z.difficulty;return r.a.createElement("main",{className:"App paper container-lg"},r.a.createElement(P,null),B?r.a.createElement("h1",null,"Loading..."):r.a.createElement("section",null,r.a.createElement(M,{difficulty:parseInt(te,10),clicked:m,correctClick:g,setCorrectClick:v,resetTimer:x,setResetTimer:R,pauseTimer:A,setPauseTimer:I}),r.a.createElement("div",{id:"buttonId"},r.a.createElement("h6",{"data-testid":"question-category"},Q),r.a.createElement("p",{"data-testid":"question-text"},H(X))),r.a.createElement("div",null,function(e,t){return e.map((function(e,a){return Y(e===t?"correct":"wrong",e,a)}))}(ee,Z)),function(){var e=r.a.createElement("button",{type:"button",onClick:$},"Next"),t=r.a.createElement("button",{type:"button",onClick:function(){return U.push("/feedback")}},"Go to Feedback"),a=r.a.createElement("span",null);return m&&i<4?e:m&&4===i?t:a}()))}var W=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(p.a)(this,Object(m.a)(t).call(this))).state={goodResult:"Mandou bem!",badResult:"Podia ser melhor...",questionsAssert:3},e.handleRankingClick=e.handleRankingClick.bind(Object(g.a)(e)),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleRankingClick",value:function(e,t,a,n){!function(e){var t=R()||[];localStorage.setItem("ranks",JSON.stringify([].concat(Object(j.a)(t),[e]).sort((function(e,t){var a=e.score;return t.score-a}))))}({name:e,score:t,email:a}),n.push("/ranking")}},{key:"render",value:function(){var e=this,t=this.state,a=t.goodResult,n=t.badResult,c=t.questionsAssert,s=this.props,o=s.name,i=s.email,u=s.score,l=s.assertions,p=s.history;return r.a.createElement("section",{className:"App paper container-lg"},r.a.createElement(P,null),r.a.createElement("div",null,r.a.createElement("h3",{"data-testid":"feedback-text"},l>=c?a:n)),r.a.createElement("section",null,r.a.createElement("h1",{"data-testid":"feedback-total-score"},u,"\ud83c\udfc6"),r.a.createElement("h2",{"data-testid":"feedback-total-question"},"acertou ".concat(l))),r.a.createElement("button",{type:"button","data-testid":"btn-play-again",onClick:function(){return p.push("/")}},"Jogar novamente"),r.a.createElement("button",{type:"button","data-testid":"btn-ranking",onClick:function(){return e.handleRankingClick(o,u,i,p)}},"Ranking"))}}]),t}(n.Component),K=Object(o.b)((function(e){return{name:e.userReducer.player.name,email:e.userReducer.player.gravatarEmail,score:e.userReducer.player.score,assertions:e.userReducer.player.assertions}}))(W),G=(a(49),function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.history;return r.a.createElement("main",{className:"App paper container-lg"},r.a.createElement("h1",{"data-testid":"ranking-title"}," Ranking "),R().map((function(e){return function(e,t,a){return r.a.createElement("div",null,r.a.createElement("h5",null,e),r.a.createElement("img",{className:"gravatarImg",src:"https://www.gravatar.com/avatar/".concat(N(a)),alt:"player"}),r.a.createElement("h5",null,t))}(e.name,e.score,e.picture)})),r.a.createElement("button",{type:"button","data-testid":"btn-go-home",onClick:function(){return e.push("/")}},"Home"))}}]),t}(r.a.Component)),H=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement(b.c,null,r.a.createElement(b.a,{exact:!0,path:"/",component:_}),r.a.createElement(b.a,{path:"/settings",component:F}),r.a.createElement(b.a,{path:"/game",component:U}),r.a.createElement(b.a,{path:"/feedback",component:K}),r.a.createElement(b.a,{path:"/ranking",component:G})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=a(15),$=a(32),z=a(31),Q={email:"",player:{name:"",assertions:0,score:0,gravatarEmail:""},colors:{wrongColor:"",rigthColor:""}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETUSERDATA":return Object(D.a)({},e,{name:t.payload.name,email:t.payload.email});case"SET_FEEDBACK":return Object(D.a)({},e,{player:Object(D.a)({},e.player,{name:t.payload.name,gravatarEmail:t.payload.email})});case"SET_BUTTON_COLLOR":return Object(D.a)({},e,{colors:{wrongColor:t.payload,rigthColor:t.payload}});case"SET_SCORE":return Object(D.a)({},e,{player:{name:t.payload.player.name,assertions:t.payload.player.assertions,score:t.payload.player.score,gravatarEmail:t.payload.player.gravatarEmail}});default:return e}},Z=Object(Y.combineReducers)({userReducer:X}),ee=Object(Y.createStore)(Z,Object(z.composeWithDevTools)(Object(Y.applyMiddleware)($.a)));window.Cypress&&(window.store=ee);var te=ee;s.a.render(r.a.createElement(i.a,null,r.a.createElement(o.a,{store:te},r.a.createElement(H,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.8048e98b.chunk.js.map