(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/7FbY.f7d7b7e7.gif"},29:function(e,t,a){},34:function(e,t,a){e.exports=a(51)},39:function(e,t,a){},44:function(e,t,a){},47:function(e,t){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),i=a.n(c),s=(a(39),a(4)),o=a(16),u=a(5),l=a(6),p=a(8),m=a(7),d=a(9),f=a(1),b=(a(44),a(2)),h=a.n(b),y=a(19),g=a(3),E=a(14),v=a(20),O=a.n(v),j=function(e){return{type:"RESET_SCORE",payload:e}},k=a(22),C=a(21),S=a.n(C),w=function(){var e,t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return"https://opentdb.com/api_token.php?command=request",a.next=3,h.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 3:return e=a.sent,a.next=6,h.a.awrap(e.json());case 6:return t=a.sent,localStorage.setItem("token",t.token),a.abrupt("return",t.token);case 9:case"end":return a.stop()}}))},T=function(e){var t,a,n=arguments;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=n.length>1&&void 0!==n[1]?n[1]:"https://opentdb.com/api.php?amount=5&token=",r.next=3,h.a.awrap(fetch("".concat(t).concat(e)));case 3:return a=r.sent,r.abrupt("return",a.json());case 5:case"end":return r.stop()}}))},R=function(e,t){var a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(T(e,t));case 2:if(a=n.sent,0!==a.response_code){n.next=6;break}return n.abrupt("return",{tokenIsValid:!0,questionObject:a});case 6:return n.abrupt("return",{tokenIsValid:!1});case 7:case"end":return n.stop()}}))},x=function(e){var t,a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t=localStorage.getItem("token"))){n.next=11;break}return n.next=4,h.a.awrap(R(t,e));case 4:if((a=n.sent).tokenIsValid){n.next=10;break}return n.next=8,h.a.awrap(w());case 8:t=n.sent,R(t);case 10:return n.abrupt("return",a.questionObject);case 11:case"end":return n.stop()}}))},N=function(e){var t={player:e},a=JSON.stringify(t);localStorage.setItem("state",a)},q=function(){return JSON.parse(localStorage.getItem("ranks"))},A=function(e){return S()(e).toString()};function D(e){return S()(e).toString()}var _=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.text,a=e.dataTestid,n=e.id,c=e.disabled,i=e.onClick;return r.a.createElement("button",{type:"button",className:"buttons-login","data-testid":a,id:n,disabled:c,onClick:i},t)}}]),t}(n.Component);_.defaultProps={onClick:"",disabled:!1};var F=function(e){function t(e){var a;Object(u.a)(this,t),a=Object(p.a)(this,Object(m.a)(t).call(this,e));var n=e.player,r=n.name,c=n.gravatarEmail;return a.state={player:{name:r,email:c}},console.log(r,c),a.handleChange=a.handleChange.bind(Object(E.a)(a)),a.handleClick=a.handleClick.bind(Object(E.a)(a)),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState((function(e){return{player:Object(g.a)({},e.player,Object(y.a)({},a,n))}}))}},{key:"handleClick",value:function(e){var t,a,n,r;return h.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=this.state.email,a=this.props,n=a.dispatchSetValue,r=a.history,n(this.state),c.next=5,h.a.awrap(w());case 5:D(t),r.push(e);case 7:case"end":return c.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.state.player,a=t.name,n=t.email;return r.a.createElement("section",{className:"App"},r.a.createElement("section",{className:"input-login"},r.a.createElement("img",{src:O.a,className:"App-logo",alt:"logo"}),r.a.createElement("label",{htmlFor:"name-input",className:"name-input"},r.a.createElement("input",{type:"text","data-testid":"input-player-name",name:"name",text:a,placeholder:"Name",className:"inputs",id:"name-input",value:a,onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"email-input",className:"name-input"},r.a.createElement("input",{type:"email",className:"inputs","data-testid":"input-gravatar-email",name:"email",id:"email-input",placeholder:"Email",value:n,onChange:this.handleChange})),r.a.createElement(_,{disabled:!n||!a,dataTestid:"btn-play",id:"button-form",onClick:function(){return e.handleClick("/game")},text:"Play",className:"gameNext"}),r.a.createElement(o.b,{to:"/settings"},r.a.createElement(_,{dataTestid:"btn-settings",id:"button-config",text:"Configuration"}))))}}]),t}(n.Component),I=Object(s.b)((function(e){return{player:e.userReducer.player}}),(function(e){return{dispatchSetValue:function(t){e({type:"SET_FEEDBACK",payload:t})}}}))(F),B=a(12),M=a(13),P=a.n(M),G=["Any","General Knowledge","Books","Film","Music","Musicals and Theatres","Television","Video Games","Board Games","Science and Nature","Computers","Mathematics","Mythology","Sports","Geography","History","Politics","Art","Celebreties","Animals","Vehicles","Comics","Gadgets","Japanise Anime and Manga","Cartoon and Animations"];a(29);function H(e){var t=e.title,a=e.items,n=e.setSettings,c=function(e){"Question Type"===t&&function(e){switch(e){case"Multiple Choice":n((function(e){return Object(g.a)({},e,{questionType:"multiple"})}));break;case"True or False":n((function(e){return Object(g.a)({},e,{questionType:"boolean"})}));break;default:n((function(e){return Object(g.a)({},e,{questionType:""})}))}}(e),"Difficult"===t&&function(e){n("Any"===e?function(e){return Object(g.a)({},e,{Difficult:""})}:function(t){return Object(g.a)({},t,{Difficult:e.toLowerCase()})})}(e),"Category"===t&&function(e){if("Any"===e)n((function(e){return Object(g.a)({},e,{Category:""})}));else{var t=G.indexOf(e,1)+8;n((function(e){return Object(g.a)({},e,{Category:t})}))}}(e)};return r.a.createElement("label",{htmlFor:"dropdown",className:"label"},t,":"," ",r.a.createElement("select",{name:"dropdown",className:"dropdown",onChange:function(e){var t=e.target.value;return c(t)}},a.map((function(e,t){return r.a.createElement("option",{key:t},e)}))))}var V={Category:"",Difficult:"",questionType:""},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_NEW_CONFIG":var r=n.Category,c=n.Difficult,i=n.questionType;return Object(g.a)({},e,{Category:r,Difficult:c,questionType:i});case"RESET_DEFAULT":return V;default:return e}};function W(e){var t=Object(n.useState)(V),a=Object(B.a)(t,2),c=a[0],i=a[1],s=Object(n.useState)(!0),o=Object(B.a)(s,2),u=o[0],l=o[1],p=Object(n.useState)(!1),m=Object(B.a)(p,2),d=m[0],f=m[1],b=e.dispatchDefaultSettings,y=e.dispatchSettings,g=e.history,E=r.a.createElement("main",null,r.a.createElement("h1",{"data-testid":"settings-title",className:"textAlingCenter"},"Configuration"),r.a.createElement("div",{className:"flexboxRow"},r.a.createElement(H,{title:"Category",items:G,setSettings:i}),r.a.createElement(H,{title:"Difficult",items:["Any","Easy","Medium","Hard"],setSettings:i}),r.a.createElement(H,{title:"Question Type",items:["Any","Multiple Choice","True or False"],setSettings:i})),r.a.createElement("div",{className:"flexboxCenter"},r.a.createElement("button",{type:"button",className:"settingsButton",onClick:function(){return g.push("/")},disabled:d},"Home"),r.a.createElement("button",{type:"button",onClick:b,className:"settingsButton",disabled:d},"Reset Default"),r.a.createElement("button",{type:"button",onClick:function(){var e,t,a,n,r;return h.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=(e=c||V).Category,a=e.Difficult,n=e.questionType,f(!0),i.next=4,h.a.awrap(x("https://opentdb.com/api.php?amount=5&category=".concat(t,"&difficulty=").concat(a,"&type=").concat(n,"&token=")));case 4:r=i.sent,f(!1),r||l(!1),r&&(0!==r.response_code?l(!1):y(c));case 8:case"end":return i.stop()}}))},className:"settingsButton",disabled:d},"Save new Settings"),d?r.a.createElement("h3",null,"Loading..."):r.a.createElement("span",null))),v=r.a.createElement("main",null,r.a.createElement("div",{className:"flexboxCenter"},r.a.createElement("h3",null,"We don\xb4t have questions for this specific set of",r.a.createElement("em",null," Rules")," ","Please try another set.")),r.a.createElement("div",{className:"flexboxCenter"},r.a.createElement("button",{type:"button",onClick:function(){b(),l(!0)}},"Reset Default")));return u?E:v}W.propTypes={dispatchDefaultSettings:P.a.func.isRequired,dispatchSettings:P.a.func.isRequired,history:P.a.objectOf(P.a.any).isRequired};var L=Object(s.b)(null,(function(e){return{dispatchSettings:function(t){return e({type:"SET_NEW_CONFIG",payload:t})},dispatchDefaultSettings:function(){return e({type:"RESET_DEFAULT",payload:"null"})}}}))(W),K=(a(49),function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.player,a=e.email,n=e.score,c=e.statePlayer;return N(c),r.a.createElement("header",{className:"header-questions"},r.a.createElement("div",null,r.a.createElement("img",{src:O.a,className:"logo-header",alt:"logo"})),r.a.createElement("div",{className:"gravatal-img"},r.a.createElement("img",{"data-testid":"header-profile-picture",src:"https://www.gravatar.com/avatar/".concat(A(a)),alt:"player"}),r.a.createElement("p",{className:"Headermargin","data-testid":"header-player-name"},t),r.a.createElement("p",{"data-testid":"header-score",className:"Headermargin"},n)))}}]),t}(n.Component)),U=Object(s.b)((function(e){return{player:e.userReducer.player.name,email:e.userReducer.player.gravatarEmail,score:e.userReducer.player.score,statePlayer:e.userReducer.player}}))(K),Q=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={counter:30,pause:e.pauseTimer},a.subtractTimer=a.subtractTimer.bind(Object(E.a)(a)),a.resetTimerFunc=a.resetTimerFunc.bind(Object(E.a)(a)),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){return h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:1e3,setInterval(this.subtractTimer,1e3);case 2:case"end":return e.stop()}}),null,this)}},{key:"resetTimerFunc",value:function(){var e=this.props,t=e.resetTimer,a=e.pauseTimer;t&&this.setState({counter:30,pause:a})}},{key:"subtractTimer",value:function(){var e=this.props.pauseTimer;this.setState((function(t){var a=t.counter,n=t.pause;return n?{counter:a,pause:n}:a>0?{counter:a-1,pause:e}:{counter:0}}))}},{key:"calculateDificult",value:function(e){switch(e){case"hard":return 3;case"medium":return 2;case"easy":default:return 1}}},{key:"points",value:function(e,t){return 10+e*this.calculateDificult(t)}},{key:"render",value:function(){var e=this.props,t=e.difficulty,a=e.correctClick,n=e.setCorrectClick,c=e.dispatchCount,i=e.resetTimer,s=e.player,o=this.state.counter;if(a){var u=this.points(o,t);s.score+=u,s.assertions+=1,N(s),c({player:s}),n(!1)}return i&&this.resetTimerFunc(),r.a.createElement("h3",null,"Tempo:"," ",o)}}]),t}(n.Component),Y=Object(s.b)((function(e){return{player:e.userReducer.player}}),(function(e){return{dispatchCount:function(t){e({type:"SET_SCORE",payload:t})}}}))(Q),$=[{category:"question-category",type:"",difficulty:"",question:"question-text",correct_answer:"",sortedAnswers:["answer1","answer2"]}];function z(e){var t=Object(n.useState)($),a=Object(B.a)(t,2),c=a[0],i=a[1],s=Object(n.useState)(0),o=Object(B.a)(s,2),u=o[0],l=o[1],p=Object(n.useState)(!1),m=Object(B.a)(p,2),d=m[0],b=m[1],y=Object(n.useState)(!1),E=Object(B.a)(y,2),v=E[0],O=E[1],j=Object(n.useState)(),C=Object(B.a)(j,2),S=C[0],w=C[1],T=Object(n.useState)(!1),R=Object(B.a)(T,2),N=R[0],q=R[1],A=Object(n.useState)(!1),D=Object(B.a)(A,2),_=D[0],F=D[1],I=Object(n.useState)(!1),M=Object(B.a)(I,2),P=M[0],G=M[1],H=Object(f.f)(),V=function(){clearTimeout(S);var e=setTimeout((function(){return b(!0)}),3e4);w(e)},J=function(e){var t=e.correct_answer,a=e.incorrect_answers;return[t].concat(Object(k.a)(a)).sort((function(){return Math.random()-.5}))},W=function(e){return e.map((function(e){return Object(g.a)({},e,{sortedAnswers:J(e)})}))},L=function(e){return decodeURI(e).replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/&eacute/g,"\xe9")},K=function(e,t,a){return r.a.createElement("button",{type:"button",className:e,key:a,disabled:d,onClick:function(){return function(e){b(!0),F(!0),"correct"===e&&O(!0)}(e)}},L(t))},Q=function(){u<4&&(l(u+1),b(!1)),q(!0),V(),F(!1)};Object(n.useEffect)((function(){!function(){var t,a,n,r,c;h.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return G(!0),t=e.Category,a=e.Difficult,n=e.questionType,s.next=4,h.a.awrap(x("https://opentdb.com/api.php?amount=5&category=".concat(t,"&difficulty=").concat(a,"&type=").concat(n,"&token=")));case 4:r=s.sent,c=r.results,i(W(c)),G(!1),V();case 9:case"end":return s.stop()}}))}()}),[]),Object(n.useEffect)((function(){return q(!1)}),[N]);var z=c[u],X=z.category,Z=z.question,ee=z.correct_answer,te=z.sortedAnswers,ae=z.difficulty;return r.a.createElement("main",{className:"App paper container-lg"},r.a.createElement(U,null),P?r.a.createElement("h1",null,"Loading..."):r.a.createElement("section",null,r.a.createElement(Y,{difficulty:parseInt(ae,10),clicked:d,correctClick:v,setCorrectClick:O,resetTimer:N,setResetTimer:q,pauseTimer:_,setPauseTimer:F}),r.a.createElement("div",{id:"buttonId"},r.a.createElement("h6",{"data-testid":"question-category"},X),r.a.createElement("p",{"data-testid":"question-text"},L(Z))),r.a.createElement("div",null,function(e,t){return e.map((function(e,a){return K(e===t?"correct":"wrong",e,a)}))}(te,ee)),function(){var e=r.a.createElement("button",{type:"button",onClick:Q},"Next"),t=r.a.createElement("button",{type:"button",onClick:function(){return H.push("/feedback")}},"Go to Feedback"),a=r.a.createElement("span",null);return d&&u<4?e:d&&4===u?t:a}()))}z.defaultProps={Category:"",Difficult:"",questionType:""};var X=Object(s.b)((function(e){var t=e.configReducer;return{Category:t.Category,Difficult:t.Difficult,questionType:t.questionType}}))(z),Z=(a(50),function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.history,a=e.resetReducerScore;return r.a.createElement("main",{className:"App paper container-lg"},r.a.createElement("h1",{"data-testid":"ranking-title"}," Ranking "),q().map((function(e){return function(e,t,a){return r.a.createElement("div",null,r.a.createElement("h5",null,e),r.a.createElement("img",{className:"gravatarImg",src:"https://www.gravatar.com/avatar/".concat(A(a)),alt:"player"}),r.a.createElement("h5",null,t))}(e.name,e.score,e.picture)})),r.a.createElement("button",{type:"button","data-testid":"btn-go-home",onClick:function(){a(),t.push("/")}},"Home"))}}]),t}(r.a.Component)),ee=Object(s.b)(null,(function(e){return{resetReducerScore:function(){return e(j())}}}))(Z),te=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(p.a)(this,Object(m.a)(t).call(this))).state={goodResult:"Mandou bem!",badResult:"Podia ser melhor...",questionsAssert:3},e.handleRankingClick=e.handleRankingClick.bind(Object(E.a)(e)),e}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleRankingClick",value:function(e,t,a,n){!function(e){var t=q()||[];localStorage.setItem("ranks",JSON.stringify([].concat(Object(k.a)(t),[e]).sort((function(e,t){var a=e.score;return t.score-a}))))}({name:e,score:t,email:a}),n.push("/ranking")}},{key:"render",value:function(){var e=this,t=this.state,a=t.goodResult,n=t.badResult,c=t.questionsAssert,i=this.props,s=i.name,o=i.email,u=i.score,l=i.assertions,p=i.history,m=i.resetReducerScore;return r.a.createElement("section",{className:"App paper container-lg"},r.a.createElement(U,null),r.a.createElement("div",null,r.a.createElement("h3",{"data-testid":"feedback-text"},l>=c?a:n)),r.a.createElement("section",null,r.a.createElement("h1",{"data-testid":"feedback-total-score"},u,"\ud83c\udfc6"),r.a.createElement("h2",{"data-testid":"feedback-total-question"},"acertou ".concat(l))),r.a.createElement("button",{type:"button","data-testid":"btn-play-again",className:"settingsButton",onClick:function(){m(),p.push("/")}},"Home"),r.a.createElement("button",{type:"button","data-testid":"btn-play-again",className:"settingsButton",onClick:function(){m(),p.push("/game")}},"Play Again"),r.a.createElement("button",{type:"button","data-testid":"btn-ranking",className:"settingsButton",onClick:function(){return e.handleRankingClick(s,u,o,p)}},"Ranking"))}}]),t}(n.Component),ae=Object(s.b)((function(e){return{name:e.userReducer.player.name,email:e.userReducer.player.gravatarEmail,score:e.userReducer.player.score,assertions:e.userReducer.player.assertions}}),(function(e){return{resetReducerScore:function(){return e(j())}}}))(te),ne=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/",component:I}),r.a.createElement(f.a,{path:"/settings",component:L}),r.a.createElement(f.a,{path:"/game",component:X}),r.a.createElement(f.a,{path:"/feedback",component:ae}),r.a.createElement(f.a,{path:"/ranking",component:ee})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var re=a(15),ce=a(33),ie=a(32),se={player:{name:"",assertions:0,score:0,gravatarEmail:""}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_FEEDBACK":var r=n.player,c=r.name,i=r.email;return Object(g.a)({},e,{player:Object(g.a)({},e.player,{name:c,gravatarEmail:i})});case"SET_SCORE":var s=n.player;return Object(g.a)({},e,{player:{name:s.name,assertions:s.assertions,score:s.score,gravatarEmail:s.gravatarEmail}});case"RESET_SCORE":return console.log(e),Object(g.a)({},e,{player:Object(g.a)({},e.player,{assertions:0,score:0})});default:return e}},ue=Object(re.combineReducers)({userReducer:oe,configReducer:J}),le=Object(re.createStore)(ue,Object(ie.composeWithDevTools)(Object(re.applyMiddleware)(ce.a)));window.Cypress&&(window.store=le);var pe=le;i.a.render(r.a.createElement(o.a,null,r.a.createElement(s.a,{store:pe},r.a.createElement(ne,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[34,1,2]]]);
//# sourceMappingURL=main.6e92c87d.chunk.js.map